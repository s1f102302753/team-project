<!DOCTYPE html>
<html lang="ja">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <title>{% block title %}デジタル回覧板{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'notices/css/base.css' %}">
    {% block extra_css %}{% endblock %}
</head>

<body>
    <header>
        <h1>デジタル回覧板</h1>
        {% if user.is_authenticated %}
        <form method="post" action="{% url 'users:logout' %}" class="logout-form">
            {% csrf_token %}
            <button type="submit" class="logout-button">ログアウト</button>
        </form>
        {% endif %}

    </header>

    <!-- タスクバー -->
    <nav id="taskbar">
        <a href="{% url 'notices:notices_list' %}" class="task-link">お知らせ</a>
        <a href="{% url 'notices:post_list' %}" class="task-link">掲示板</a>
        <a href="{% url 'chatbot:chat_page' %}" class="task-link">AIアシスタント</a>
    </nav>

    <main id="main-content">
        {% block content %}
        {% endblock %}
    </main>

<script>
  window.addEventListener('pageshow', function(event) {
    if (event.persisted || window.performance && window.performance.getEntriesByType('navigation')[0].type === 'back_forward') {
      window.location.reload();
    }
  });
</script>

</body>
</html>
